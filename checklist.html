<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>حالة الطلب</title>
<link rel="stylesheet" href="/static/css/style.css">
</head>
<body>

<div class="container wide">
    <img src="/static/img/logo.png" class="logo small">

    <h2 id="clientName">جاري التحميل...</h2>
    <p id="serviceName"></p>

    <ul id="checklist" class="checklist"></ul>
</div>

<script>
const code = "{{ code }}";

fetch(`/track?code=${code}`)
.then(res => res.json())
.then(data => {
    if(data.error){
        document.body.innerHTML = `<h3>${data.error}</h3>`;
        return;
    }

    document.getElementById("clientName").innerText = data.name;
    document.getElementById("serviceName").innerText = data.service;

    const ul = document.getElementById("checklist");
    data.checklist.forEach(step => {
        ul.innerHTML += `
            <li class="${step.done ? 'done' : ''}">
                <span>${step.name}</span>
                <span>${step.done ? '✔' : '○'}</span>
            </li>
        `;
    });
});
</script>

</body>
</html>
